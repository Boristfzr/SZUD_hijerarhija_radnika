#define MAX_NAME_LENGTH 100

typedef struct Radnik {
    char ime[MAX_NAME_LENGTH];  
    struct Radnik* menadzer;   
    struct Radnik* podredjeni;  
    struct Radnik* sledeci;     
} Radnik;

Radnik* novi_radnik(const char* ime) {
    Radnik* r = (Radnik*)malloc(sizeof(Radnik));
    strncpy(r->ime, ime, MAX_NAME_LENGTH);
    r->menadzer = NULL;
    r->podredjeni = NULL;
    r->sledeci = NULL;
    return r;
}

void dodaj_podredjenog(Radnik* menadzer, Radnik* podredjeni) {
    podredjeni->menadzer = menadzer;
    if (menadzer->podredjeni == NULL) {
        menadzer->podredjeni = podredjeni;
    } else {
        Radnik* poslednji = menadzer->podredjeni;
        while (poslednji->sledeci != NULL) {
            poslednji = poslednji->sledeci;
        }
        poslednji->sledeci = podredjeni;
    }
}

void ispis_hijerarhije(Radnik* radnik, int nivo) {
    if (radnik == NULL) return;

    for (int i = 0; i < nivo; i++) {
        printf("  ");
    }
    printf("%s\n", radnik->ime);

    ispis_hijerarhije(radnik->podredjeni, nivo + 1);
    
    ispis_hijerarhije(radnik->sledeci, nivo);
}

int main() {
    Radnik* direktor = novi_radnik("Direktor");
    Radnik* menadzer1 = novi_radnik("Menadžer 1");
    Radnik* menadzer2 = novi_radnik("Menadžer 2");
    Radnik* zaposleni1 = novi_radnik("Zaposleni 1");
    Radnik* zaposleni2 = novi_radnik("Zaposleni 2");
    Radnik* zaposleni3 = novi_radnik("Zaposleni 3");

    dodaj_podredjenog(direktor, menadzer1);
    
    dodaj_podredjenog(menadzer1, zaposleni1);
    dodaj_podredjenog(menadzer1, zaposleni2);
    dodaj_podredjenog(menadzer2, zaposleni3);
    

    printf("Unesite ime radnika za pretragu: ");
    char ime[MAX_NAME_LENGTH];
    scanf("%s", ime);

    
    Radnik* radnik = pronadji_radnika(direktor, ime);
    if (radnik != NULL) {
        printf("Radnik %s je pronađen\n", ime);
    } else {
        printf("Radnik nije pronađen\n");


    free(direktor);
    free(menadzer1);
    free(menadzer2);
    free(zaposleni1);
    free(zaposleni2);
    free(zaposleni3);
}

    return 0;
